{"mappings":"AAAA,IAAIA,MAAQ,CACVC,cAAe,CAACC,EAAKC,KAAUC,KAE7B,GAAkB,mBAAPF,EAAmB,CAE5B,MADgB,CAAEA,MAAKC,MAAO,IAAKA,EAAOC,Y,CAI5C,IACE,OAAOF,EAAIC,E,CACX,OAAOE,QAAEA,EAAOC,IAAEA,IAKlB,OAJAD,EAAQE,MAAMC,IACZC,aAAaC,IAAIJ,EAAKE,GACtBG,UAAU,IAEL,CAAET,IAAK,KAAMC,MAAO,CAAEC,SAAU,CAAC,e,IAK9C,MAAMQ,OAAS,GACf,IAAIC,YAAc,EAElB,MAAMC,SAAYC,IAChB,MAAMC,EAAgBH,YACtBD,OAAOI,KAAmBD,EAQ1B,OADAF,cACO,CAACD,OAAOI,GANCC,IACdC,QAAQC,IAAIP,QACZA,OAAOI,GAAiBC,EACxBN,UAAU,EAG4B,EAGpCF,aAAe,IAAIW,IACnBC,eAAiB,CAACC,EAAmBhB,KACzC,GAAIG,aAAac,IAAIjB,GACnB,OAAOG,aAAae,IAAIlB,GAG1B,KAAM,CAAED,QAASiB,IAAqBhB,MAAK,EAGvCmB,IAAM,KACV,MAAOC,EAAMC,GAAWb,SAAS,SAC1Bc,EAAOC,GAAYf,SAAS,GAE7BgB,EAAcT,gBAClB,IACEU,MAAM,2CACHxB,MAAMyB,GAAMA,EAAEC,SACd1B,MAAM2B,GAAYA,EAAQC,WAC/B,YAGF,OACEnC,MAAAC,cAAC,MAAG,CAACmC,UAAU,+BACbpC,MAAAC,cAAC,KAAE,KAAC,iBAAeyB,EAAK,OACxB1B,MAAAC,cAAC,QAAK,CACJoC,GAAG,aACHC,YAAY,kBACZC,KAAK,OACLC,SAAWC,GAAMd,EAAQc,EAAEC,OAAOC,SAEpC3C,MAAAC,cAAC,MAAG,CACF2C,MAAM,uBACNR,UAAU,mBACVS,IAAKf,EACLgB,IAAI,cAEN9C,MAAAC,cAAC,MAAG,CAACmC,UAAU,eACbpC,MAAAC,cAAC,OAAI,KAAC,WAAS2B,GACf5B,MAAAC,cAAC,MAAG,KACFD,MAAAC,cAAC,SAAM,CACL8C,QAAS,KACPlB,EAASD,EAAQ,EAAE,GAEtB,QAGD5B,MAAAC,cAAC,SAAM,CACLmC,UAAU,gBACVW,QAAS,KACPlB,EAASD,EAAQ,EAAE,GAEtB,aAKL5B,MAAAC,cAAC,IAAC,KAAC,4OAMHD,MAAAC,cAAC,SAAM,KACLD,MAAAC,cAAC,IAAC,CAACyC,OAAO,SAASM,KAAK,gEAA+D,4BAErF,EAGJC,OAAS,CAACC,EAAwBC,KAEtC,GAAI,CAAC,SAAU,UAAUC,gBAAgBF,GAAyB,CAChE,IAAIG,EAAUC,SAASC,eAAeC,OAAON,IAE7C,YADAC,EAAUM,YAAYJ,E,CAIxB,MAAMK,EAAiBJ,SAASrD,cAAciD,EAAuBhD,KAErE,GAAIgD,EAAuB/C,MAAO,CAClBwD,OAAOC,KAAKV,EAAuB/C,OAC3C0D,QAAQC,GAAW,YAALA,IAAiBC,SAClCD,GAAOJ,EAAeI,GAAKZ,EAAuB/C,MAAM2D,I,CAI7D,GAAIZ,EAAuB/C,MAAMC,SAAU,CACzC,IAAIA,SAAEA,GAAa8C,EAAuB/C,MAC1CC,EAAS2D,SAASC,GAAUf,OAAOe,EAAON,I,CAE5CP,EAAUM,YAAYC,EAAe,EAGjC/C,SAAW,KACfE,YAAc,EACdyC,SAASW,eAAe,QAAQC,WAAWC,SAC3ClB,OAAOjD,MAAAC,cAACwB,IAAG,MAAK6B,SAASW,eAAe,QAAQ,EAGlDhB,OAAOjD,MAAAC,cAACwB,IAAG,MAAK6B,SAASW,eAAe","sources":["index.tsx"],"sourcesContent":["let React = {\r\n  createElement: (tag, props, ...children) => {\r\n    // if is not a react component i.e: \r\n    if (typeof tag != \"function\") {\r\n      const element = { tag, props: { ...props, children } };\r\n      return element;\r\n    }\r\n\r\n    try {\r\n      return tag(props);\r\n    } catch ({ promise, key }) {\r\n      promise.then((data) => {\r\n        promiseCache.set(key, data);\r\n        rerender();\r\n      });\r\n      return { tag: \"h1\", props: { children: [\"Loading...\"] } };\r\n    }\r\n  },\r\n};\r\n\r\nconst states = [];\r\nlet stateCursor = 0;\r\n\r\nconst useState = (initialState) => {\r\n  const FROZEN_CURSOR = stateCursor;\r\n  states[FROZEN_CURSOR] ||= initialState;\r\n\r\n  let setState = (newState) => {\r\n    console.log(states);\r\n    states[FROZEN_CURSOR] = newState;\r\n    rerender();\r\n  };\r\n  stateCursor++;\r\n  return [states[FROZEN_CURSOR], setState];\r\n};\r\n\r\nconst promiseCache = new Map();\r\nconst createResource = (dataFetchFunction, key) => {\r\n  if (promiseCache.has(key)) {\r\n    return promiseCache.get(key);\r\n  }\r\n\r\n  throw { promise: dataFetchFunction(), key };\r\n};\r\n\r\nconst App = () => {\r\n  const [name, setName] = useState(\"user\");\r\n  const [count, setCount] = useState(0);\r\n  // simulate suspense behaviour\r\n  const dogPhotoUrl = createResource(\r\n    () =>\r\n      fetch(\"https://dog.ceo/api/breeds/image/random\")\r\n        .then((r) => r.json())\r\n        .then((payload) => payload.message),\r\n    \"dogphoto\"\r\n  );\r\n\r\n  return (\r\n    <div className=\"text-center small-container\">\r\n      <h1>Hello welcome {name} !!</h1>\r\n      <input\r\n        id=\"input-text\"\r\n        placeholder=\"Enter your name\"\r\n        type=\"text\"\r\n        onchange={(e) => setName(e.target.value)}\r\n      />\r\n      <img\r\n        style=\"border-radius:.5rem;\"\r\n        className=\"responsive-image\"\r\n        src={dogPhotoUrl}\r\n        alt=\"dog photo\"\r\n      />\r\n      <div className=\"text-center\">\r\n        <code>Likes : {count}</code>\r\n        <div>\r\n          <button\r\n            onclick={() => {\r\n              setCount(count + 1);\r\n            }}\r\n          >\r\n            Like\r\n          </button>\r\n          <button\r\n            className=\"accent-button\"\r\n            onclick={() => {\r\n              setCount(count - 1);\r\n            }}\r\n          >\r\n            Dislike\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p>\r\n        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Consequatur\r\n        rerum voluptatibus molestiae, accusantium nam animi alias dicta illo\r\n        tempora, magni ipsa? Eaque necessitatibus dolores illum dicta facilis\r\n        rem reiciendis ratione?\r\n      </p>\r\n      <footer>\r\n        <a target=\"_blank\" href=\"https://github.com/MartinEmanuelMaldonado93/reactFromScratch\">Take a look at the code</a>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\nconst render = (reactElementOrStrOrNum, container) => {\r\n  // if is not a React Element just text ...\r\n  if ([\"string\", \"number\"].includes(typeof reactElementOrStrOrNum)) {\r\n    let strNode = document.createTextNode(String(reactElementOrStrOrNum));\r\n    container.appendChild(strNode);\r\n    return;\r\n  }\r\n  //create a div,span, wherever..\r\n  const currDomElement = document.createElement(reactElementOrStrOrNum.tag);\r\n  // apply the props\r\n  if (reactElementOrStrOrNum.props) {\r\n    const Props = Object.keys(reactElementOrStrOrNum.props);\r\n    Props.filter((p) => p != \"children\").forEach(\r\n      (p) => (currDomElement[p] = reactElementOrStrOrNum.props[p])\r\n    );\r\n  }\r\n  // nested childrens...\r\n  if (reactElementOrStrOrNum.props.children) {\r\n    let { children } = reactElementOrStrOrNum.props;\r\n    children.forEach((child) => render(child, currDomElement));\r\n  }\r\n  container.appendChild(currDomElement);\r\n};\r\n\r\nconst rerender = () => {\r\n  stateCursor = 0;\r\n  document.getElementById(\"root\").firstChild.remove();\r\n  render(<App />, document.getElementById(\"root\"));\r\n};\r\n\r\nrender(<App />, document.getElementById(\"root\"));\r\n"],"names":["React","createElement","tag","props","children","promise","key","then","data","promiseCache","set","rerender","states","stateCursor","useState","initialState","FROZEN_CURSOR","newState","console","log","Map","createResource","dataFetchFunction","has","get","App","name","setName","count","setCount","dogPhotoUrl","fetch","r","json","payload","message","className","id","placeholder","type","onchange","e","target","value","style","src","alt","onclick","href","render","reactElementOrStrOrNum","container","includes","strNode","document","createTextNode","String","appendChild","currDomElement","Object","keys","filter","p","forEach","child","getElementById","firstChild","remove"],"version":3,"file":"index.0b7cbd0f.js.map"}