{"mappings":"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","sources":["index.tsx"],"sourcesContent":["let React = {\r\n  createElement: (tag, props, ...children) => {\r\n    // if is not a react component i.e: \r\n    if (typeof tag != \"function\") {\r\n      const element = { tag, props: { ...props, children } };\r\n      return element;\r\n    }\r\n\r\n    try {\r\n      return tag(props);\r\n    } catch ({ promise, key }) {\r\n      promise.then((data) => {\r\n        promiseCache.set(key, data);\r\n        rerender();\r\n      });\r\n      return { tag: \"h1\", props: { children: [\"Loading...\"] } };\r\n    }\r\n  },\r\n};\r\n\r\nconst states = [];\r\nlet stateCursor = 0;\r\n\r\nconst useState = (initialState) => {\r\n  const FROZEN_CURSOR = stateCursor;\r\n  states[FROZEN_CURSOR] ||= initialState;\r\n\r\n  let setState = (newState) => {\r\n    console.log(states);\r\n    states[FROZEN_CURSOR] = newState;\r\n    rerender();\r\n  };\r\n  stateCursor++;\r\n  return [states[FROZEN_CURSOR], setState];\r\n};\r\n\r\nconst promiseCache = new Map();\r\nconst createResource = (dataFetchFunction, key) => {\r\n  if (promiseCache.has(key)) {\r\n    return promiseCache.get(key);\r\n  }\r\n\r\n  throw { promise: dataFetchFunction(), key };\r\n};\r\n\r\nconst App = () => {\r\n  const [name, setName] = useState(\"user\");\r\n  const [count, setCount] = useState(0);\r\n  // simulate suspense behaviour\r\n  const dogPhotoUrl = createResource(\r\n    () =>\r\n      fetch(\"https://dog.ceo/api/breeds/image/random\")\r\n        .then((r) => r.json())\r\n        .then((payload) => payload.message),\r\n    \"dogphoto\"\r\n  );\r\n\r\n  return (\r\n    <div className=\"text-center small-container\">\r\n      <h1>Hello welcome {name} !!</h1>\r\n      <input\r\n        id=\"input-text\"\r\n        placeholder=\"Enter your name\"\r\n        type=\"text\"\r\n        onchange={(e) => setName(e.target.value)}\r\n      />\r\n      <img\r\n        style=\"border-radius:.5rem;\"\r\n        className=\"responsive-image\"\r\n        src={dogPhotoUrl}\r\n        alt=\"dog photo\"\r\n      />\r\n      <div className=\"text-center\">\r\n        <code>Likes : {count}</code>\r\n        <div>\r\n          <button\r\n            onclick={() => {\r\n              setCount(count + 1);\r\n            }}\r\n          >\r\n            Like\r\n          </button>\r\n          <button\r\n            className=\"accent-button\"\r\n            onclick={() => {\r\n              setCount(count - 1);\r\n            }}\r\n          >\r\n            Dislike\r\n          </button>\r\n        </div>\r\n      </div>\r\n      <p>\r\n        Lorem, ipsum dolor sit amet consectetur adipisicing elit. Consequatur\r\n        rerum voluptatibus molestiae, accusantium nam animi alias dicta illo\r\n        tempora, magni ipsa? Eaque necessitatibus dolores illum dicta facilis\r\n        rem reiciendis ratione?\r\n      </p>\r\n      <footer>\r\n        <a target=\"_blank\" href=\"https://github.com/MartinEmanuelMaldonado93/reactFromScratch\">Take a look at the code</a>\r\n      </footer>\r\n    </div>\r\n  );\r\n};\r\nconst render = (reactElementOrStrOrNum, container) => {\r\n  // if is not a React Element just text ...\r\n  if ([\"string\", \"number\"].includes(typeof reactElementOrStrOrNum)) {\r\n    let strNode = document.createTextNode(String(reactElementOrStrOrNum));\r\n    container.appendChild(strNode);\r\n    return;\r\n  }\r\n  //create a div,span, wherever..\r\n  const currDomElement = document.createElement(reactElementOrStrOrNum.tag);\r\n  // apply the props\r\n  if (reactElementOrStrOrNum.props) {\r\n    const Props = Object.keys(reactElementOrStrOrNum.props);\r\n    Props.filter((p) => p != \"children\").forEach(\r\n      (p) => (currDomElement[p] = reactElementOrStrOrNum.props[p])\r\n    );\r\n  }\r\n  // nested childrens...\r\n  if (reactElementOrStrOrNum.props.children) {\r\n    let { children } = reactElementOrStrOrNum.props;\r\n    children.forEach((child) => render(child, currDomElement));\r\n  }\r\n  container.appendChild(currDomElement);\r\n};\r\n\r\nconst rerender = () => {\r\n  stateCursor = 0;\r\n  document.getElementById(\"root\").firstChild.remove();\r\n  render(<App />, document.getElementById(\"root\"));\r\n};\r\n\r\nrender(<App />, document.getElementById(\"root\"));\r\n"],"names":[],"version":3,"file":"index.ad9a7e97.js.map","sourceRoot":"/__parcel_source_root/"}